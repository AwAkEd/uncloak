{"version":3,"sources":["../src/app.js"],"names":[],"mappings":"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","file":"app.js","sourcesContent":["\"use strict\";\n\nangular.module(\"uncloak\", [])\n.controller(\"MainCtrl\", function ($scope, $http, ThemeSvc) {\n\t// the following const will wrap the final output in the view\n\tconst HEADER = '@import \"../template/mixins\";\\n@import \"../template/settings\";\\n\\n';\n\tconst FOOTER = '\\n@import \"../template/theme\";';\n\n\t$scope.themes = [];\n\t// name\n\t$scope.selectedTheme = \"\";\n\t// scss vars\n\t$scope.theme = {};\n\n\t// outputs\n\t$scope.scss = \"\";\n\t$scope.css = \"\";\n\n\t// helper for inputs\n\t$scope.getType = (k = \"\", v = \"\") => {\n\t\tif (k.toLowerCase().includes(\"color\") || v[0] === \"#\") {\n\t\t\treturn \"color\";\n\t\t}\n\t\treturn \"text\";\n\t};\n\n\t// init\n\n\t// themes bundled with reveal.js\n\tThemeSvc.getList().then((list) => {\n\t\t$scope.themes = list;\n\t\t// default (see /reveal.js/css/theme/source/black.scss )\n\t\t$scope.selectedTheme = \"black\";\n\t});\n\n\t// watchers\n\n\t// reload pristine theme\n\t$scope.$watch(\"selectedTheme\", (nv) => {\n\t\tif (!nv) return;\n\t\tThemeSvc.get(nv).then(theme => $scope.theme = theme);\n\t});\n\n\t// values of the form have change\n\t$scope.$watch(\"theme\", () => {\n\t\tlet scss = \"\";\n\t\tfor (let k in $scope.theme) {\n\t\t\tscss += \"$\" + k + \": \" + $scope.theme[k] + \";\\n\";\n\t\t}\n\t\t// update scss output\n\t\t$scope.scss = HEADER + scss + FOOTER;\n\n\t\t$http.post(\"http://localhost:8080/convert\", { scss })\n\t\t\t.then(({ data }) => {\n\t\t\t\t// update css output\n\t\t\t\t$scope.css = data;\n\t\t\t\tupdateIframe();\n\t\t\t})\n\t\t\t.catch(console.error);\n\t}, true);\n\n\t// feel the DOM magic\n\tfunction updateIframe () {\n\t\tconst id = \"custom-css\";\n\t\tconst previewDoc = document.getElementById(\"reveal-preview\").contentDocument;\n\t\tconst previewBody = previewDoc.body;\n\t\t// iframe not ready\n\t\tif (!previewBody) return;\n\n\t\tif (previewDoc.getElementById(id)) {\n\t\t\tpreviewDoc.getElementById(id).remove();\n\t\t}\n\t\tconst link = document.createElement(\"link\");\n\t\tlink.href = \"/custom.css?\" + Math.random();\n\t\tlink.rel = \"stylesheet\";\n\t\tlink.id = id;\n\t\tpreviewBody.appendChild(link);\n\t}\n})\n.factory(\"ThemeSvc\", function ($q, $http) {\n\t// cache\n\tlet themes = [];\n\n\treturn {\n\t\tgetList () {\n\t\t\tif (themes.length) return $q.when(themes);\n\n\t\t\treturn $http.get(\"/themes\").then((res) => {\n\t\t\t\tthemes = res.data;\n\t\t\t\treturn themes;\n\t\t\t});\n\t\t},\n\t\tget (id) {\n\t\t\treturn $http.get(\"/themes/\" + id).then(res => res.data);\n\t\t}\n\t};\n});\n"]}